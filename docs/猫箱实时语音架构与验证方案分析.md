# 猫箱实时语音架构与验证方案分析

## 1. 结论先行
- **最可能的架构**：猫箱的实时语音链路以云端为主，使用字节自有栈（*豆包*大模型 + 火山引擎语音/RTC网络），端侧仅承担采集/VAD（*Voice Activity Detection*）/编解码与少量前后处理；未找到调用第三方主流LLM（*Large Language Model*）做聚合路由的证据。依据包括：猫箱与豆包同一主体公司开发、官网与域名解析落在字节/火山体系、火山引擎公开提供“豆包实时语音大模型”和 WebRTC/WTN 网络，以及猫箱的会员策略明显受云端算力与高峰限速约束。 [apps.apple.com](https://apps.apple.com/cn/app/%E7%8C%AB%E7%AE%B1-%E5%92%8C%E5%BF%83%E5%8A%A8-ai-%E6%8E%A2%E7%B4%A2%E5%89%A7%E6%83%85%E5%AE%87%E5%AE%99/id6475000292?utm_source=openai)
- **实时语音的端—云编排**（推断版，可复现实证）：  
  端侧 PCM（*脉冲编码调制*）/Opus 采集 →（WebRTC/QUIC/HTTP2 流式）→ 云端 ASR（*自动语音识别*）增量转写 → 豆包 LLM 生成增量文本/语音指令 → 云端 TTS（*文本转语音*）增量合成 → SRTP 音频包回传播放；不具备离线模式，也无端上大模型权重落地迹象。 [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)

---

## 2. 为什么我们这么判断（证据链与“所以呢”）

### 2.1 主体与模型归属一致
- App Store 显示开发者为“北京春田知韵科技有限公司”，豆包词条同样指向该主体；猫箱页面还出现“语音畅聊、更长通话时间、高峰不限速”等订阅条款，典型反映云端配额与限流策略。 [apps.apple.com](https://apps.apple.com/cn/app/%E7%8C%AB%E7%AE%B1-%E5%92%8C%E5%BF%83%E5%8A%A8-ai-%E6%8E%A2%E7%B4%A2%E5%89%A7%E6%83%85%E5%AE%87%E5%AE%99/id6475000292?utm_source=openai)
- 多个资讯与导航源将猫箱标注为“基于豆包（原云雀）”的应用层产品；虽非一手技术文档，但与主体与投放整合动向相互印证：猫箱与星绘并入/对齐豆包体系，资源聚焦。 [pconline.com.cn](https://www.pconline.com.cn/ai/product/347.html?utm_source=openai)  
**所以呢**：既已有自有通用与角色扮演 LLM，从成本、合规、体验一致性角度，不具备跨云聚合外部 LLM 的动机。

### 2.2 基础设施指纹
- 官网域名 maoxiangai.com 的 NS 落在 volc-dns.* （火山引擎 DNS），解析链路指向字节/火山 CDN 集群，表明前端与分发在自家网络，与使用火山 RTC/WTN 与语音栈天然耦合。 [radar.cloudflare.com](https://radar.cloudflare.com/domains/domain/maoxiangai.com?utm_source=openai)
- 火山引擎公开产品：veRTC 与 WTN（WebRTC 传输网络）面向“实时对话式 AI”，给出全局 400ms 端到端 SLA 与多区域平均链路延迟；语音技术页明确“豆包实时语音大模型，整体时延约 1.5s”，支持端到端 Speech-to-Speech。 [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)  
**所以呢**：猫箱若走自家栈，能在体验与成本上获得最优一致性，并避免外部 LLM 在审查与数据出境上的不确定性。

### 2.3 功能与商业策略侧证
- 猫箱订阅的“更长通话时间/高峰不限速”与豆包/火山的按量计费与峰值调度模型匹配；若端上有本地 ASR/LLM/TTS，语音时长受限与高峰不限速就缺乏经济学意义。 [apps.apple.com](https://apps.apple.com/cn/app/%E7%8C%AB%E7%AE%B1-%E5%92%8C%E5%BF%83%E5%8A%A8-ai-%E6%8E%A2%E7%B4%A2%E5%89%A7%E6%83%85%E5%AE%87%E5%AE%99/id6475000292?utm_source=openai)  
**所以呢**：商业策略也印证云端为主的付费与限速机制。

---

## 3. 可复现的灰盒证据计划
**目标**：将“云端为主、端侧轻量、WebRTC 传输、豆包 ASR/LLM/TTS”的假设，收敛成可重复的实证图谱，用于路线对标。

### A. 网络层抓包与指纹
- **观察项**：SNI/DNS/证书组织、协议族与端口特征、弱网重连策略。  
- **期望指纹**：  
  - DNS→ volc-dns.*，TLS 证书组织/中间链归属于字节/火山；业务域名 CNAME 落在字节 CDN。 [radar.cloudflare.com](https://radar.cloudflare.com/domains/domain/maoxiangai.com?utm_source=openai)  
  - 握手/传输：STUN/DTLS/SRTP/QUIC 等实时轨迹，音频上行分片 20–60ms，心跳/重传策略与 veRTC 一致。 [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)  
- **场景编排**：限带宽（64/32/16 kbps）、注入丢包（10–30%）、时延（+100/+200 ms）、短断网/飞行模式，记录重连耗时与 Jitter 缓冲增长。  
- **合规边界**：仅做元数据与时序分析，不尝试解密媒体负载。

### B. 端侧性能与文件画像
- **工具**：Android Perfetto/系统跟踪、iOS Instruments。  
- **观察项**：通话期间 CPU/GPU/NPU 占用曲线、内存峰值、I/O 与大文件映射；查找 App 沙盒是否存在 >100 MB 的语音/LLM 权重与本地模型索引；冷启动/热启动时是否有模型权重加载的典型模式（长时 I/O、页缺失激增）。  
- **预期**：端侧主要为音频 Front-end 与编解码，NPU 占用不呈持续高负载，无大体量模型权重落地。

### C. 端到端延迟剖面（100+ 轮统计）
- **采集指标**：VAD 击发 → 首包上行 → ASR 首字 → LLM 首 token → TTS 首包 → 播放首帧，全链路时间分布与抖动。  
- **预期范围**（对齐火山公开指标与行业实践，实际以测试为准）：  
  - 强网场景 E2E 600–1,200 ms  
  - 弱网场景 1.2–2.0 s  
  - 云端首 token 主导抖动 [volcengine.com](https://www.volcengine.com/product/voice-tech?utm_source=openai)

### D. 版本/渠道对比
- **差异分析**：iOS/Android、App 版本（是否存在 A/B 路由）、地区网络差异（海外/境内）对延迟与路由的影响，验证是否出现边缘节点或跨区域路由。

---

## 4. 推荐路线对比

| 路线 | 描述                                    | 优势                                  | 劣势                                        | 目标延迟                               |
|------|---------------------------------------|-------------------------------------|-------------------------------------------|--------------------------------------|
| A    | 本地 VAD+降噪+编解码，云端 ASR+LLM+TTS   | 端到端复杂度低、端适配成本小               | 受云侧 SLA/费用牵引                            | 强网 800–1,200 ms                    |
| B    | 本地 ASR+本地 TTS，云端 LLM            | 显著降低往返与峰值成本                   | 端上 BOM 与功耗上涨，TTS 资源与音色管理复杂           | 强网 300–700 ms；弱网 700–1,200 ms   |
| C    | 全本地 Speech-to-Speech               | 无往返延迟                               | 需 ≥12 GB 内存、强 NPU 与散热，仅旗舰机/专用硬件可行    | 根据设备能力，设计“短上下文+检索”规避退化 |

> *工程建议为行业经验总结，非来源引证。*

---

## 5. 当前已掌握的“硬证据”与“推断”

| 类型   | 内容                                                                                           | 来源/说明                                                                                                                                                                                        |
|------|----------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 硬证据  | 猫箱与豆包同主体公司（北京春田知韵），猫箱订阅项包含“更长通话时间/高峰不限速”。                                    | [apps.apple.com](https://apps.apple.com/cn/app/%E7%8C%AB%E7%AE%B1-%E5%92%8C%E5%BF%83%E5%8A%A8-ai-%E6%8E%A2%E7%B4%A2%E5%89%A7%E6%83%85%E5%AE%87%E5%AE%99/id6475000292?utm_source=openai) |
| 硬证据  | 猫箱网站域名的 NS 为 volc-dns.*，解析链路指向字节/火山 CDN，属字节基础设施。                                   | [radar.cloudflare.com](https://radar.cloudflare.com/domains/domain/maoxiangai.com?utm_source=openai)                                                                                               |
| 硬证据  | 火山引擎对外提供 veRTC/WTN 与“豆包实时语音大模型”，公开承诺的低时延与全球传输网络，符合实时语音对话应用的能力边界。 | [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)                                                                                                                     |
| 硬证据  | 媒体与行业观察显示猫箱与星绘向豆包体系靠拢（组织与投放层面整合），与使用自家模型/云的路径一致。                        | [sohu.com](https://www.sohu.com/a/892413067_120231872?utm_source=openai)                                                                                                                         |
| 推断   | 传输使用 WebRTC/QUIC/HTTP2 流式，上云后进行增量 ASR→LLM→TTS 流水线。                                         | 待灰盒验证                                                                                                                                                                                      |
| 推断   | 端侧不落本地 LLM/TTS/ASR 模型权重，无离线/弱网纯本地模式；弱网表现依赖 RTC 抗抖与云端重试。                             | 待灰盒验证                                                                                                                                                                                      |

---

## 6. 两周灰盒测试落地行动清单
1. **第 1–2 天**：环境搭建与基线体验录制；抓域名解析/证书链/协议族；建立通话 E2E 打点脚手架。  
2. **第 3–5 天**：强网/限速/丢包/注时延四象限实验；记录重连策略、首包/尾包分布；端侧功耗与占用画像。  
3. **第 6–7 天**：沙盒文件与 I/O 热度扫描；大文件与模型痕迹排查；跨版本/跨平台对比。  
4. **第 8–10 天**：100+ 轮对话统计与抖动分析；构建“端—链路—云”编排图与切换阈值草案。  
5. **第 11–14 天**：复现实验与对照；出具可复制的链路图、延迟剖面、成本测算与我方路线建议。

---

## 7. 对你方的直接建议
- **上线周期紧、端 BOM 受限**：采用路线 A 或 B 更贴近猫箱的真实可用边界；云端 LLM 必备，本地优先放在 ASR/TTS，以削减往返与成本，兼顾打断与并行合成。  
- **合规与隐私要求高**：优先自建/托管在国内区域云（含边缘节点），规避跨境调用外部 LLM；猫箱也在用自家云与模型，这是它在峰值限速与成本控制上的可持续之处。 [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)

---

## 8. 已知不确定性与下一步
- **不确定性**：目前无官方技术白皮书直接披露猫箱的实时语音内部调用链；以上为强相关公开证据与工程可证推断。  
- **下一步**：通过上述灰盒测试计划补齐证据；若授权，我们可在两周内交付“可复现链路图 + 时延剖面 + 端占用画像”。

---

## 9. 引用与来源说明
- 猫箱 App Store 条目（开发主体、会员条款、版本信息）。 [apps.apple.com](https://apps.apple.com/cn/app/%E7%8C%AB%E7%AE%B1-%E5%92%8C%E5%BF%83%E5%8A%A8-ai-%E6%8E%A2%E7%B4%A2%E5%89%A7%E6%83%85%E5%AE%87%E5%AE%99/id6475000292?utm_source=openai)  
- 豆包词条（开发主体与产品家族）。 [zh.wikipedia.org](https://zh.wikipedia.org/wiki/%E8%B1%86%E5%8C%85_%28%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%29?utm_source=openai)  
- 火山引擎 veRTC/WTN 产品页（实时对话式 AI、链路与时延 SLA）。 [volcengine.com](https://www.volcengine.com/product/veRTC?utm_source=openai)  
- 火山引擎语音技术页（豆包实时语音大模型、端到端语音能力与时延）。 [volcengine.com](https://www.volcengine.com/product/voice-tech?utm_source=openai)  
- 猫箱官网/主体与备案信息、域名 NS 为 volc-dns.*（火山 DNS）。 [myparallelstory.com](https://www.myparallelstory.com/)  
- 媒体对 Flow 整合与猫箱/星绘向豆包体系靠拢的报道（侧证产品与资源归并）。 [sohu.com](https://www.sohu.com/a/892413067_120231872?utm_source=openai)